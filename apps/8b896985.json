{
  "id": "8b896985",
  "name": "速算闯关",
  "description": "",
  "code": {
    "html": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>速算闯关</title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <!-- 开始界面 -->\n  <div id=\"start-screen\">\n    <button id=\"start-btn\">开始游戏</button>\n  </div>\n\n  <!-- 游戏主界面 -->\n  <div id=\"game-screen\" class=\"hidden\">\n    <div class=\"top-section\">\n      <div class=\"level-info\">第 <span id=\"current-level\">1</span> 关</div>\n      <div class=\"progress-container\">\n        <div class=\"progress-bar\" id=\"progress-bar\"></div>\n      </div>\n      <div class=\"question\" id=\"question\">加载中...</div>\n    </div>\n    \n    <div class=\"options-container\">\n      <button class=\"option-btn\" id=\"option-1\">-</button>\n      <button class=\"option-btn\" id=\"option-2\">-</button>\n      <button class=\"option-btn\" id=\"option-3\">-</button>\n    </div>\n  </div>\n\n  <!-- 游戏结束界面 -->\n  <div id=\"gameover-screen\">\n    <div class=\"gameover-content\">\n      <div class=\"roast-text\">三秒都算不清？你家计算器都比你快！</div>\n      <div id=\"final-score\">得分: 0</div>\n      <button id=\"retry-btn\">不服再来！</button>\n    </div>\n  </div>\n\n  <script src=\"script.js\"></script>\n</body>\n</html>",
    "css": ":root {\n  --primary-color: #4361ee;\n  --correct-color: #4cc9f0;\n  --wrong-color: #f72585;\n  --text-color: #333;\n  --bg-color: #f8f9fa;\n}\n\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  font-family: 'Arial', sans-serif;\n  background-color: var(--bg-color);\n  color: var(--text-color);\n  height: 100vh;\n  overflow: hidden;\n}\n\n.hidden {\n  display: none !important;\n}\n\n/* 开始界面 */\n#start-screen {\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background-color: #1a1a2e;\n  background-image: url('http://localhost:3000/api/images/B8Y29-cover');\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  padding-bottom: 60px;\n  z-index: 1000;\n}\n\n#start-btn {\n  padding: 20px 60px;\n  font-size: 24px;\n  background: rgba(255,255,255,0.95);\n  border: none;\n  border-radius: 50px;\n  cursor: pointer;\n  font-weight: bold;\n  box-shadow: 0 4px 20px rgba(0,0,0,0.3);\n  transition: transform 0.2s;\n}\n\n#start-btn:hover {\n  transform: scale(1.05);\n}\n\n/* 游戏界面 */\n#game-screen {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  padding: 20px;\n}\n\n.top-section {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n}\n\n.level-info {\n  font-size: 24px;\n  margin-bottom: 20px;\n  color: var(--primary-color);\n  font-weight: bold;\n}\n\n.progress-container {\n  width: 80%;\n  max-width: 500px;\n  height: 10px;\n  background-color: #ddd;\n  border-radius: 5px;\n  margin-bottom: 30px;\n  overflow: hidden;\n}\n\n.progress-bar {\n  height: 100%;\n  width: 100%;\n  background-color: var(--primary-color);\n  transition: width 0.1s linear;\n}\n\n.question {\n  font-size: 48px;\n  font-weight: bold;\n  margin-bottom: 30px;\n}\n\n.options-container {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 20px;\n  width: 100%;\n  max-width: 500px;\n  margin: 0 auto 40px;\n}\n\n.option-btn {\n  padding: 20px;\n  font-size: 24px;\n  border: none;\n  border-radius: 12px;\n  background-color: white;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.option-btn:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 6px 16px rgba(0,0,0,0.15);\n}\n\n.option-btn:active {\n  transform: translateY(1px);\n}\n\n.option-btn.correct {\n  background-color: var(--correct-color);\n  color: white;\n}\n\n.option-btn.wrong {\n  background-color: var(--wrong-color);\n  color: white;\n}\n\n/* 游戏结束界面 */\n#gameover-screen {\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background-color: #1a1a2e;\n  background-image: url('http://localhost:3000/api/images/B8Y29-gameover');\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  display: none;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n#gameover-screen.show {\n  display: flex;\n}\n\n.gameover-content {\n  background: rgba(0,0,0,0.7);\n  padding: 40px;\n  border-radius: 20px;\n  text-align: center;\n  max-width: 90%;\n}\n\n.roast-text {\n  font-size: 24px;\n  color: #ff6b6b;\n  font-weight: bold;\n  margin-bottom: 20px;\n}\n\n#final-score {\n  font-size: 32px;\n  color: white;\n  margin-bottom: 30px;\n}\n\n#retry-btn {\n  padding: 20px 60px;\n  font-size: 24px;\n  background: linear-gradient(135deg, #ff6b6b, #ee5a5a);\n  color: white;\n  border: none;\n  border-radius: 50px;\n  cursor: pointer;\n  font-weight: bold;\n  box-shadow: 0 4px 20px rgba(0,0,0,0.3);\n  transition: transform 0.2s;\n}\n\n#retry-btn:hover {\n  transform: scale(1.05);\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .question {\n    font-size: 36px;\n  }\n  \n  .option-btn {\n    padding: 16px;\n    font-size: 20px;\n  }\n  \n  .roast-text {\n    font-size: 20px;\n  }\n  \n  #final-score {\n    font-size: 28px;\n  }\n}",
    "js": "// 游戏状态变量\nlet gameState = {\n  currentLevel: 1,\n  score: 0,\n  timeLeft: 3,\n  timer: null,\n  correctAnswer: 0,\n  question: ''\n};\n\n// DOM 元素\nconst startScreen = document.getElementById('start-screen');\nconst gameScreen = document.getElementById('game-screen');\nconst gameOverScreen = document.getElementById('gameover-screen');\nconst startBtn = document.getElementById('start-btn');\nconst retryBtn = document.getElementById('retry-btn');\nconst questionEl = document.getElementById('question');\nconst levelEl = document.getElementById('current-level');\nconst progressBar = document.getElementById('progress-bar');\nconst finalScoreEl = document.getElementById('final-score');\nconst optionButtons = [\n  document.getElementById('option-1'),\n  document.getElementById('option-2'),\n  document.getElementById('option-3')\n];\n\n// 初始化游戏\nfunction initGame() {\n  gameState.currentLevel = 1;\n  gameState.score = 0;\n  updateLevelDisplay();\n  generateQuestion();\n  startTimer();\n}\n\n// 更新关卡显示\nfunction updateLevelDisplay() {\n  levelEl.textContent = gameState.currentLevel;\n}\n\n// 生成题目\nfunction generateQuestion() {\n  // 根据关卡调整难度\n  const maxNum = Math.min(20 + (gameState.currentLevel - 1) * 5, 100);\n  const num1 = Math.floor(Math.random() * maxNum) + 1;\n  const num2 = Math.floor(Math.random() * maxNum) + 1;\n  \n  // 确保结果为正数\n  gameState.correctAnswer = num1 + num2;\n  gameState.question = `${num1} + ${num2}`;\n  \n  questionEl.textContent = gameState.question;\n  \n  // 生成选项\n  const correctIndex = Math.floor(Math.random() * 3);\n  const answers = [];\n  \n  // 设置正确答案\n  answers[correctIndex] = gameState.correctAnswer;\n  \n  // 生成错误答案\n  for (let i = 0; i < 3; i++) {\n    if (i !== correctIndex) {\n      let wrongAnswer;\n      do {\n        const offset = Math.floor(Math.random() * 11) - 5; // -5 到 5 的偏移\n        wrongAnswer = gameState.correctAnswer + offset;\n      } while (wrongAnswer <= 0 || answers.includes(wrongAnswer));\n      \n      answers[i] = wrongAnswer;\n    }\n    \n    optionButtons[i].textContent = answers[i];\n    optionButtons[i].classList.remove('correct', 'wrong');\n  }\n}\n\n// 开始计时器\nfunction startTimer() {\n  gameState.timeLeft = 3;\n  updateProgressBar();\n  \n  if (gameState.timer) {\n    clearInterval(gameState.timer);\n  }\n  \n  gameState.timer = setInterval(() => {\n    gameState.timeLeft -= 0.1;\n    updateProgressBar();\n    \n    if (gameState.timeLeft <= 0) {\n      clearInterval(gameState.timer);\n      endGame();\n    }\n  }, 100);\n}\n\n// 更新进度条\nfunction updateProgressBar() {\n  const percentage = (gameState.timeLeft / 3) * 100;\n  progressBar.style.width = `${percentage}%`;\n}\n\n// 处理答案选择\nfunction handleAnswer(selectedButton) {\n  const selectedAnswer = parseInt(selectedButton.textContent);\n  \n  // 禁用所有按钮\n  optionButtons.forEach(btn => {\n    btn.disabled = true;\n  });\n  \n  if (selectedAnswer === gameState.correctAnswer) {\n    // 正确答案\n    selectedButton.classList.add('correct');\n    gameState.score += 10 * gameState.currentLevel;\n    gameState.currentLevel++;\n    \n    // 短暂延迟后进入下一题\n    setTimeout(() => {\n      updateLevelDisplay();\n      generateQuestion();\n      startTimer();\n      \n      // 重新启用按钮\n      optionButtons.forEach(btn => {\n        btn.disabled = false;\n      });\n    }, 1000);\n  } else {\n    // 错误答案\n    selectedButton.classList.add('wrong');\n    \n    // 显示正确答案\n    optionButtons.forEach(btn => {\n      if (parseInt(btn.textContent) === gameState.correctAnswer) {\n        btn.classList.add('correct');\n      }\n    });\n    \n    // 短暂延迟后结束游戏\n    setTimeout(() => {\n      endGame();\n    }, 1500);\n  }\n}\n\n// 结束游戏\nfunction endGame() {\n  clearInterval(gameState.timer);\n  finalScoreEl.textContent = `得分: ${gameState.score}`;\n  gameScreen.classList.add('hidden');\n  gameOverScreen.classList.add('show');\n}\n\n// 事件监听器\nstartBtn.addEventListener('click', () => {\n  startScreen.classList.add('hidden');\n  gameScreen.classList.remove('hidden');\n  initGame();\n});\n\nretryBtn.addEventListener('click', () => {\n  gameOverScreen.classList.remove('show');\n  startScreen.classList.remove('hidden');\n});\n\noptionButtons.forEach(button => {\n  button.addEventListener('click', () => {\n    if (!button.disabled) {\n      handleAnswer(button);\n    }\n  });\n});\n\n// 页面加载完成后的初始化\ndocument.addEventListener('DOMContentLoaded', () => {\n  // 确保所有元素都已加载\n  if (!startScreen || !gameScreen || !gameOverScreen) {\n    console.error('页面元素未正确加载');\n    return;\n  }\n});"
  },
  "enrichedData": {
    "appName": "速算闯关",
    "appType": "game",
    "appDescription": "三秒限时口算挑战，通过闯关模式锻炼快速计算能力，每题三选一作答，答错即失败，激发用户挑战欲与成就感。",
    "targetUser": "小学生及家长、口算练习者、希望提升计算速度的用户",
    "coreFeatures": [
      "三秒倒计时出题，每题限时作答",
      "三选一答题按钮，正确则进入下一题，错误跳转失败界面",
      "闯关模式：连续答对进入下一关，每关难度递增"
    ],
    "userFlow": "启动应用 → 开始游戏 → 三秒倒计时显示题目 → 三选一按钮答题 → 正确：进入下一题；错误：跳转失败界面并显示得分与重试选项 → 通关后显示关卡成就",
    "uiLayout": {
      "type": "单页",
      "mainComponents": [
        "题目显示区",
        "三按钮答题区",
        "倒计时进度条",
        "关卡进度提示"
      ],
      "layout": "顶部为题目和倒计时条，中间为三个等大答题按钮，底部显示当前关卡进度"
    },
    "interactionDesign": {
      "primaryAction": "点击答题按钮",
      "feedbackType": "动画（按钮点击反馈）+ 声音（正确/错误提示音）",
      "gestures": [
        "单击答题按钮"
      ]
    },
    "visualStyle": {
      "theme": "游戏化",
      "colorScheme": "明亮蓝绿为主色调，搭配白色背景，突出数字与按钮",
      "typography": "清晰无衬线字体，题目字号大，按钮文字醒目"
    },
    "technicalNotes": "使用定时器控制三秒倒计时，每题生成随机算术题（加减法，范围可配置），答题结果即时判断并跳转界面；失败界面包含重试和返回主菜单按钮；支持本地关卡进度保存",
    "coverImagePrompt": "A playful cartoon illustration featuring a cartoon robot with giant eyes and a calculator for a head, racing through a neon-lit math maze filled with floating numbers and bouncing math symbols, stylized text '速算闯关' in bold, glowing blue-green letters at the center, surrounded by three giant question-mark buttons with checkmarks and Xs, vibrant colors, cheerful and energetic atmosphere, high-quality digital art with a game-like vibe, sparkling effects on the numbers, fun and challenging feel",
    "gameOverImagePrompt": "A hyper-exaggerated cartoon scene of a player dramatically falling off a giant calculator, with a red 'GAME OVER' stamp exploding in the background. The player's face is frozen in shock, eyes wide and tongue hanging out, surrounded by floating math symbols like '1+1=5' and '3×4=10'. A smug, cartoonish calculator with sunglasses and a tiny crown laughs from the center, holding a 'You Failed!' sign. Bright, clashing colors: electric yellow, fiery red, and neon green. The style is over-the-top comic book with bold outlines and dramatic shadows. A tiny '3-second' clock is melting into the ground, symbolizing lost time. Playful chaos, humorous defeat, and a 'try again' energy.",
    "roastText": "三秒都算不清？你家计算器都比你快！",
    "coverImageId": "B8Y29-cover",
    "gameOverImageId": "B8Y29-gameover",
    "coverImagePath": "http://localhost:3000/api/images/B8Y29-cover",
    "gameOverImagePath": "http://localhost:3000/api/images/B8Y29-gameover"
  },
  "createdAt": "2025-12-10T11:32:39.189Z"
}